"use strict";(self.webpackChunkjavascript_parser_in_rust=self.webpackChunkjavascript_parser_in_rust||[]).push([[736],{2216:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>l});var t=s(1527),r=s(7660);const c={id:"semantics_analysis",title:"Semantic Analysis"},i=void 0,a={id:"semantics_analysis",title:"Semantic Analysis",description:"\uc2dc\ub9e8\ud2f1 \ubd84\uc11d\uc740 \uc18c\uc2a4 \ucf54\ub4dc\uac00 \uc62c\ubc14\ub978\uc9c0 \uc5ec\ubd80\ub97c \ud655\uc778\ud558\ub294 \ud504\ub85c\uc138\uc2a4\uc785\ub2c8\ub2e4.",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/semantic_analysis.md",sourceDirName:".",slug:"/semantics_analysis",permalink:"/javascript-parser-in-rust/ko/docs/semantics_analysis",draft:!1,unlisted:!1,editUrl:"https://github.com/oxc-project/javascript-parser-in-rust/tree/main/docs/semantic_analysis.md",tags:[],version:"current",frontMatter:{id:"semantics_analysis",title:"Semantic Analysis"},sidebar:"tutorialSidebar",previous:{title:"Dealing with Errors",permalink:"/javascript-parser-in-rust/ko/docs/errors"},next:{title:"TypeScript",permalink:"/javascript-parser-in-rust/ko/docs/typescript"}},o={},l=[{value:"Context",id:"context",level:2},{value:"Scope",id:"scope",level:2},{value:"The Visitor Pattern",id:"the-visitor-pattern",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:'\uc2dc\ub9e8\ud2f1 \ubd84\uc11d\uc740 \uc18c\uc2a4 \ucf54\ub4dc\uac00 \uc62c\ubc14\ub978\uc9c0 \uc5ec\ubd80\ub97c \ud655\uc778\ud558\ub294 \ud504\ub85c\uc138\uc2a4\uc785\ub2c8\ub2e4.\nECMAScript \uc0ac\uc591\uc758 \ubaa8\ub4e0 "Early Error" \uaddc\uce59\uc5d0 \ub300\ud574 \ud655\uc778\ud574\uc57c \ud569\ub2c8\ub2e4.'}),"\n",(0,t.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,t.jsxs)(n.p,{children:["\uc608\ub97c \ub4e4\uc5b4 ",(0,t.jsx)(n.code,{children:"[Yield]"})," \ub610\ub294 ",(0,t.jsx)(n.code,{children:"[Await]"}),"\uc640 \uac19\uc740 \ubb38\ubc95 \ubb38\ub9e5\uc758 \uacbd\uc6b0 \ubb38\ubc95\uc774 \uae08\uc9c0\ud558\ub294 \uacbd\uc6b0 \uc624\ub958\ub97c \ubc1c\uc0dd\uc2dc\ucf1c\uc57c \ud569\ub2c8\ub2e4:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markup",children:"BindingIdentifier[Yield, Await] :\n  Identifier\n  yield\n  await\n\n13.1.1 Static Semantics: Early Errors\n\nBindingIdentifier[Yield, Await] : yield\n* It is a Syntax Error if this production has a [Yield] parameter.\n\n* BindingIdentifier[Yield, Await] : await\nIt is a Syntax Error if this production has an [Await] parameter.\n"})}),"\n",(0,t.jsx)(n.p,{children:"\uc5d0\ub7ec\ub97c \ubcf4\uc77c \ud544\uc694\uac00 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"async *\n  function foo() {\n    var yield, await;\n  };\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\uc65c\ub0d0\ud558\uba74 ",(0,t.jsx)(n.code,{children:"AsyncGeneratorDeclaration"}),"\uc5d0\ub294 ",(0,t.jsx)(n.code,{children:"[+Yield]"}),"\uc640 ",(0,t.jsx)(n.code,{children:"AsyncGeneratorBody"}),"\uc5d0 \ub300\ud55c ",(0,t.jsx)(n.code,{children:"[+Await]"}),"\uac00 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markup",children:"AsyncGeneratorBody :\n  FunctionBody[+Yield, +Await]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Rome\uc5d0\uc11c ",(0,t.jsx)(n.code,{children:"yield"})," \ud0a4\uc6cc\ub4dc\ub97c \ud655\uc778\ud558\ub294 \uc608\uc81c\uc785\ub2c8\ub2e4:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",metastring:"reference",children:"https://github.com/rome/tools/blob/5a059c0413baf1d54436ac0c149a829f0dfd1f4d/crates/rome_js_parser/src/syntax/expr.rs#L1368-L1377\n"})}),"\n",(0,t.jsx)(n.h2,{id:"scope",children:"Scope"}),"\n",(0,t.jsx)(n.p,{children:"\uc120\uc5b8 \uc624\ub958\uc758 \uacbd\uc6b0:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markup",children:"14.2.1 Static Semantics: Early Errors\n\nBlock : { StatementList }\n* It is a Syntax Error if the LexicallyDeclaredNames of StatementList contains any duplicate entries.\n* It is a Syntax Error if any element of the LexicallyDeclaredNames of StatementList also occurs in the VarDeclaredNames of StatementList.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\uc2a4\ucf54\ud504 \ud2b8\ub9ac\ub97c \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4. \uc2a4\ucf54\ud504 \ud2b8\ub9ac\ub294 \uadf8 \uc548\uc5d0 \uc120\uc5b8\ub41c \ubaa8\ub4e0 ",(0,t.jsx)(n.code,{children:"var"}),"\uc640 ",(0,t.jsx)(n.code,{children:"let"}),"\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4.\n\ub610\ud55c \ud2b8\ub9ac\ub97c \ud0d0\uc0c9\ud558\uace0 \uc0c1\uc704 \uc2a4\ucf54\ud504\uc5d0\uc11c \ubc14\uc778\ub529 \uc2dd\ubcc4\uc790\ub97c \uac80\uc0c9\ud558\ub824\ub294 \uc0c1\uc704 \ud3ec\uc778\ud305 \ud2b8\ub9ac\uc774\uae30\ub3c4 \ud569\ub2c8\ub2e4.\n\uc6b0\ub9ac\uac00 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ub370\uc774\ud130 \uad6c\uc870\ub294 ",(0,t.jsx)(n.a,{href:"https://docs.rs/indextree/latest/indextree/",children:(0,t.jsx)(n.code,{children:"indextree"})}),"\uc785\ub2c8\ub2e4."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"use indextree::{Arena, Node, NodeId};\nuse bitflags::bitflags;\n\npub type Scopes = Arena<Scope>;\npub type ScopeId = NodeId;\n\nbitflags! {\n    #[derive(Default)]\n    pub struct ScopeFlags: u8 {\n        const TOP = 1 << 0;\n        const FUNCTION = 1 << 1;\n        const ARROW = 1 << 2;\n        const CLASS_STATIC_BLOCK = 1 << 4;\n        const VAR = Self::TOP.bits | Self::FUNCTION.bits | Self::CLASS_STATIC_BLOCK.bits;\n    }\n}\n\n#[derive(Debug, Clone)]\npub struct Scope {\n    /// [Strict Mode Code](https://tc39.es/ecma262/#sec-strict-mode-code)\n    /// [Use Strict Directive Prologue](https://tc39.es/ecma262/#sec-directive-prologues-and-the-use-strict-directive)\n    pub strict_mode: bool,\n\n    pub flags: ScopeFlags,\n\n    /// [Lexically Declared Names](https://tc39.es/ecma262/#sec-static-semantics-lexicallydeclarednames)\n    pub lexical: IndexMap<Atom, SymbolId, FxBuildHasher>,\n\n    /// [Var Declared Names](https://tc39.es/ecma262/#sec-static-semantics-vardeclarednames)\n    pub var: IndexMap<Atom, SymbolId, FxBuildHasher>,\n\n    /// Function Declarations\n    pub function: IndexMap<Atom, SymbolId, FxBuildHasher>,\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\uc2a4\ucf54\ud504 \ud2b8\ub9ac\ub294 \uc131\ub2a5\uc0c1\uc758 \uc774\uc720\ub85c \ud30c\uc11c \ub0b4\ubd80\uc5d0 \uad6c\ucd95\ud558\uac70\ub098 \ubcc4\ub3c4\uc758 AST \ud328\uc2a4\uc5d0 \uad6c\ucd95\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,t.jsxs)(n.p,{children:["\uc77c\ubc18\uc801\uc73c\ub85c ",(0,t.jsx)(n.code,{children:"ScopeBuilder"}),"\uac00 \ud544\uc694\ud569\ub2c8\ub2e4:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"pub struct ScopeBuilder {\n    scopes: Scopes,\n    root_scope_id: ScopeId,\n    current_scope_id: ScopeId,\n}\n\nimpl ScopeBuilder {\n    pub fn current_scope(&self) -> &Scope {\n        self.scopes[self.current_scope_id].get()\n    }\n\n    pub fn enter_scope(&mut self, flags: ScopeFlags) {\n        // Inherit strict mode for functions\n        // https://tc39.es/ecma262/#sec-strict-mode-code\n        let mut strict_mode = self.scopes[self.root_scope_id].get().strict_mode;\n        let parent_scope = self.current_scope();\n        if !strict_mode\n            && parent_scope.flags.intersects(ScopeFlags::FUNCTION)\n            && parent_scope.strict_mode\n        {\n            strict_mode = true;\n        }\n\n        let scope = Scope::new(flags, strict_mode);\n        let new_scope_id = self.scopes.new_node(scope);\n        self.current_scope_id.append(new_scope_id, &mut self.scopes);\n        self.current_scope_id = new_scope_id;\n    }\n\n    pub fn leave_scope(&mut self) {\n      self.current_scope_id = self.scopes[self.current_scope_id].parent().unwrap();\n    }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\uadf8\ub7f0 \ub2e4\uc74c, \uc608\ub97c \ub4e4\uc5b4 acorn\uc5d0\uc11c\uc640 \uac19\uc774 \ud30c\uc2f1 \ud568\uc218 \ub0b4\uc5d0\uc11c ",(0,t.jsx)(n.code,{children:"enter_scope"}),"\uc640 ",(0,t.jsx)(n.code,{children:"leave_scope"}),"\ub97c \uc801\uc808\ud788 \ud638\ucd9c\ud569\ub2c8\ub2e4:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",metastring:"reference",children:"https://github.com/acornjs/acorn/blob/11735729c4ebe590e406f952059813f250a4cbd1/acorn/src/statement.js#L425-L437\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["\uc774 \uc811\uadfc \ubc29\uc2dd\uc758 \ub2e8\uc810 \uc911 \ud558\ub098\ub294 \ud654\uc0b4\ud45c \ud568\uc218\uc758 \uacbd\uc6b0,\n\ud654\uc0b4\ud45c \ud568\uc218\uac00 \uc544\ub2c8\ub77c \uc2dc\ud000\uc2a4 \ud45c\ud604\uc2dd\uc778 \uacbd\uc6b0 \uc784\uc2dc \ubc94\uc704\ub97c \uc0dd\uc131\ud55c \ub2e4\uc74c \ub098\uc911\uc5d0 \uc0ad\uc81c\ud574\uc57c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc774\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,t.jsx)(n.a,{href:"/blog/grammar#cover-grammar",children:"cover grammar"}),"\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})}),"\n",(0,t.jsx)(n.h3,{id:"the-visitor-pattern",children:"The Visitor Pattern"}),"\n",(0,t.jsx)(n.p,{children:"\uac04\uc18c\ud654\ub97c \uc704\ud574 \ub2e4\ub978 \ud328\uc2a4\uc5d0\uc11c \uc2a4\ucf54\ud504 \ud2b8\ub9ac\ub97c \ube4c\ub4dc\ud558\uae30\ub85c \uacb0\uc815\ud55c \uacbd\uc6b0, AST\uc758 \ubaa8\ub4e0 \ub178\ub4dc\ub97c \uae4a\uc774 \uc6b0\uc120 \uc120\uc21c\uc704\ub85c \ubc29\ubb38\ud558\uace0 \uc2a4\ucf54\ud504 \ud2b8\ub9ac\ub97c \ube4c\ub4dc\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://rust-unofficial.github.io/patterns/patterns/behavioural/visitor.html",children:"Visitor Pattern"}),"\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac01 \uac1d\uccb4\uc5d0\uc11c \uc218\ud589\ub418\ub294 \uc791\uc5c5\uc5d0\uc11c traversal process\ub97c \ubd84\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,t.jsxs)(n.p,{children:["\ubc29\ubb38 \uc2dc ",(0,t.jsx)(n.code,{children:"enter_scope"}),"\uc640 ",(0,t.jsx)(n.code,{children:"leave_scope"}),"\ub97c \uc801\uc808\ud788 \ud638\ucd9c\ud558\uc5ec \uc2a4\ucf54\ud504 \ud2b8\ub9ac\ub97c \uad6c\ucd95\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},7660:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>i});var t=s(959);const r={},c=t.createContext(r);function i(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);